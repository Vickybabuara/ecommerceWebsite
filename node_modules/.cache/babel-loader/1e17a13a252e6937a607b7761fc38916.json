{"ast":null,"code":"import _regeneratorRuntime from\"E:/Project/ecommerce-react-website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/Project/ecommerce-react-website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useContext}from\"react\";import{CartContext}from\"../Global/CartContext\";import{CartReducer}from\"../Global/CartReducer\";import StripeCheckout from\"react-stripe-checkout\";import axios from\"axios\";import{toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";toast.configure();var Cart=function Cart(props){var _useContext=useContext(CartContext),shoppingCart=_useContext.shoppingCart,totalPrice=_useContext.totalPrice,qty=_useContext.qty,dispatch=_useContext.dispatch;var data=useContext(CartContext);console.log(data);// adding to card\nvar handleToken=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(token){var product,response,status;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0://console.log(token);\nproduct={name:\"All Products\",price:totalPrice};_context.next=3;return axios.post(\"http://localhost:8080/checkout\",{product:product,token:token});case 3:response=_context.sent;status=response.data.status;console.log(status);if(status===\"success\"){dispatch({type:'EMPTY'});props.history.push('/');toast.success(\"You have paid successfully\",{position:toast.POSITION.TOP_RIGHT});}//     console.log(response);\ncase 7:case\"end\":return _context.stop();}}},_callee);}));return function handleToken(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cart-container\",style:{marginTop:'100px'},children:shoppingCart.length>0?shoppingCart.map(function(carts){return/*#__PURE__*/_jsxs(\"div\",{className:\"cart\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"cart-image\",children:/*#__PURE__*/_jsx(\"img\",{src:carts.image,alt:\"not found\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"cart-product-name\",children:carts.name}),/*#__PURE__*/_jsx(\"span\",{className:\"cart-product-price\",children:carts.price}),/*#__PURE__*/_jsx(\"span\",{className:\"inc\",onClick:function onClick(){return dispatch({type:'INC',id:carts.id,cart:carts});},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"product-quantity\",children:carts.qty}),/*#__PURE__*/_jsx(\"span\",{className:\"dec\",onClick:function onClick(){return dispatch({type:'DEC',id:carts.id,cart:carts});},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-minus\"})}),/*#__PURE__*/_jsxs(\"span\",{className:\"product-total-price\",children:[\"$\",carts.price*carts.qty,\".00\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"delete\",onClick:function onClick(){return dispatch({type:'DELETE',id:carts.id,cart:carts});},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash-alt\"})})]},carts.id);}):/*#__PURE__*/_jsx(\"div\",{className:\"empty\",children:\"Sorry your card is empty.\"})}),shoppingCart.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"cart-summary\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"summary\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Cart Summary\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"total-items\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"items\",children:\"Total Items\"}),/*#__PURE__*/_jsx(\"div\",{className:\"item-count\",children:qty})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"total-price-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"just-title\",children:\"Total Price\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-price\",children:[\"$\",totalPrice,\".00\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"stripe-section\",children:/*#__PURE__*/_jsx(StripeCheckout,{stripeKey:\"pk_test_51IqfILSGBfzDew1juUWK27iUjeRDbECLzVimDHlzEBHEXKbLd8sJJWubscxjQbigJJGkVYjCiRh4oHHDQMHumYOw00pl2kFV6M\",token:handleToken,billingAddress:true,shippingAddress:true,amount:totalPrice*100,name:\"All Products\"})})]})]})}):'']});};export default Cart;","map":{"version":3,"names":["React","useContext","CartContext","CartReducer","StripeCheckout","axios","toast","configure","Cart","props","shoppingCart","totalPrice","qty","dispatch","data","console","log","handleToken","token","product","name","price","post","response","status","type","history","push","success","position","POSITION","TOP_RIGHT","marginTop","length","map","carts","image","id","cart"],"sources":["E:/Project/ecommerce-react-website/src/components/Cart.js"],"sourcesContent":["import React,{useContext} from \"react\";\nimport {CartContext} from \"../Global/CartContext\"\nimport { CartReducer } from \"../Global/CartReducer\";\nimport StripeCheckout from \"react-stripe-checkout\";\nimport axios from \"axios\";\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n  toast.configure();\n\nconst Cart=(props)=>{\n    const {shoppingCart, totalPrice, qty, dispatch} = useContext(CartContext);\n    const data = useContext(CartContext);\n    console.log(data);// adding to card\n     const handleToken = async (token)=>{\n       //console.log(token);\n        const product  = {name:\"All Products\", price: totalPrice} \n        const response = await axios.post(\"http://localhost:8080/checkout\", {\n              product,\n              token\n        });\n         const {status} = response.data;\n         console.log(status);\n       if (status===\"success\"){\n            dispatch({type :'EMPTY'})\n             props.history.push('/');\n            toast.success(\"You have paid successfully\", {position:toast.POSITION.TOP_RIGHT});\n        }\n    //     console.log(response);\n     }\nreturn(\n<div className=\"container\">\n    <div className=\"cart-container\" style={{marginTop: '100px'}}>\n{shoppingCart.length >0 \n? shoppingCart.map(carts=>(<div className='cart' key={carts.id}> \n<span className='cart-image'>\n    <img src={carts.image} alt='not found'/>\n</span>\n<span className='cart-product-name'>\n{carts.name}\n</span>\n<span className='cart-product-price'>\n{carts.price}\n</span>\n<span className='inc' onClick={()=>dispatch({type:'INC', id: carts.id, cart:carts})}> \n<i className='fas fa-plus'></i>\n</span>\n<span className='product-quantity'>\n{carts.qty}\n</span>\n<span className='dec' onClick={()=>dispatch({type:'DEC', id: carts.id, cart:carts})}>\n<i className='fas fa-minus'></i>\n</span>\n<span className='product-total-price'>\n${carts.price*carts.qty}.00\n</span>\n<span className='delete' onClick={()=>dispatch({type:'DELETE', id: carts.id, cart:carts})}>\n<i className='fas fa-trash-alt'></i>\n</span>\n</div>))\n:<div className=\"empty\">Sorry your card is empty.</div>}\n    </div>\n{shoppingCart.length>0? \n<div className=\"cart-summary\">\n<div className=\"summary\">\n    <h3>Cart Summary</h3>\n    <div className=\"total-items\">\n      <div className=\"items\">\n          Total Items\n      </div>\n      <div className=\"item-count\">\n          {qty}\n      </div>\n    </div>\n    <div className=\"total-price-section\"> \n    <div className=\"just-title\">\n          Total Price\n      </div>\n      <div className=\"item-price\">\n          ${totalPrice}.00\n      </div> \n   <div className=\"stripe-section\">\n    <StripeCheckout\n    stripeKey=\"pk_test_51IqfILSGBfzDew1juUWK27iUjeRDbECLzVimDHlzEBHEXKbLd8sJJWubscxjQbigJJGkVYjCiRh4oHHDQMHumYOw00pl2kFV6M\"\n    token={handleToken}\n    billingAddress\n    shippingAddress\n    amount={totalPrice*100}\n    name=\"All Products\"\n    >\n\n    </StripeCheckout>\n    </div> \n</div>\n</div>\n</div>:''\n}\n</div>\n)\n}\n\nexport default Cart"],"mappings":"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"},"metadata":{},"sourceType":"module"}